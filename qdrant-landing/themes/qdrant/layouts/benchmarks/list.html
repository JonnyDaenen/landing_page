{{ define "main" }}

{{ range $i,$p := where .Data.Pages "Section" "benchmarks" }}


<div class="auto-container pt-3 pt-md-5 single-page">
    <div class="row clearfix">
        <!-- Content Side -->
        <section class="content-side col-lg-12 col-md-12 col-sm-12">
            {{ .Scratch.Set "scope" "single" }}
            {{ $link := .Permalink }}
            {{ if .Params.external_link }}
            {{ $link = .Params.external_link }}
            {{ end }}


            {{ if .Description }}
            <article class="article article_benchmarks article_narrow">
                <h1>{{ .Title }}</h1>
                <p>{{ .Description }}</p>
            </article>
            {{ end }}

            {{ if .Params.hundred_thread_data }}
            <div class="row clearfix">
                <article class="article article_benchmarks article_narrow">
                    <h1>{{ .Params.hundred_thread_title }}</h1>
                    <p>{{ .Params.hundred_thread_description }}</p>
                </article>
                <section class="content-side col-lg-12 col-md-12 col-sm-12">
                    {{
                        partial "benchmark_chart"
                        (dict "Params" (dict "id" 1 "metric" "rps" "data" .Params.hundred_thread_data))
                    }}
                </section>
            </div>
            {{ end }}

            {{ if .Params.single_thread_data }}
            <div class="row clearfix">
                <article class="article article_benchmarks article_narrow">
                    <h1>{{ .Params.single_thread_title }}</h1>
                    <p>{{ .Params.single_thread_description }}</p>
                </article>
                <section class="content-side col-lg-12 col-md-12 col-sm-12">
                    {{
                        partial "benchmark_chart"
                        (dict "Params" (dict "id" 2 "metric" "mean_time" "data" .Params.single_thread_data))
                    }}
                </section>
            </div>
            {{ end }}

            {{ if .Params.filter_data }}
            <div class="row clearfix">
                <section class="content-side col-lg-12 col-md-12 col-sm-12">
                    {{ partial "benchmark_filter_chart" . }}
                </section>
            </div>
            {{ end }}


            <article class="article article_benchmarks article_narrow">
                {{ .Content }}
            </article>
        </section>
    </div>
</div>


{{ end }}
{{ end }}
